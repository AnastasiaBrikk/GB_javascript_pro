<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Формы и сетевые запросы</title>
</head>

<body>
    <!-- Задание 1. добавить
    функциональность динамического фильтрации товаров по
    категориям. У вас есть форма с выпадающим списком (select), в
    котором пользователь может выбрать категорию товаров. При выборе
    категории товаров, необходимо динамически обновлять список
    отображаемых товаров на странице, чтобы пользователь видел
    только товары из выбранной категории.
    1. Создайте интерфейс веб-страницы, который включает в себя
    следующие элементы:
    a. Выпадающий список (select) с категориями товаров.
    b. Список товаров, который будет отображать товары в
    соответствии с выбранной категорией.
    c. Каждый товар в списке должен содержать название и
    категорию.
    2. Используйте HTML для создания элементов интерфейса -->

    <!-- <h1>Интернет-магазин</h1>
    <select id="selectItems">
        <option value="">Выберите категорию</option>
        <option value="Электроника">Электроника</option>
        <option value="Мебель">Мебель</option>
        <option value="Одежда">Одежда</option>
        <option value="Посуда">Посуда</option>
    </select>

    <ul id="product-list"></ul>

    <script>
        const productsData = [
            {
            id: 1,
            name: "Ноутбук",
            category: "Электроника",
        },
        {
            id: 2,
            name: "Телефон",
            category: "Электроника"
        },
        {
            id: 3,
            name: "Стол",
            category: "Мебель"
        },
        {
            id: 4,
            name: "Диван",
            category: "Мебель"
        },
        {
            id: 5,
            name: "Кровать",
            category: "Мебель"
        },
        {
            id: 6,
            name: "Штаны",
            category: "Одежда"
        },
        {
            id: 7,
            name: "Платье",
            category: "Одежда"
        },
        {
            id: 8,
            name: "Шорты",
            category: "Одежда"
        },
        {
            id: 9,
            name: "Стакан",
            category: "Посуда"
        },
        {
            id: 10,
            name: "Тарелка",
            category: "Посуда"
        }
        ]

        function displayProducts(category) {
            const productList = document.querySelector("#product-list");

            productList.innerHTML = '';

            productsData.forEach((product) => {
                if (category === '' || product.category === category) {
                    const li = document.createElement('li');
                    li.textContent = product.name;
                    productList.appendChild(li);
                }
            });
        }

        const categorySelect = document.querySelector('#selectItems');
        categorySelect.addEventListener('change', function () {
            const selectedCategory = categorySelect.value;
            displayProducts(selectedCategory);
        })


        displayProducts('');

    </script> -->


    <!-- Задание 2. Сделать бесконечную ленту (фотографий), при прокрутке вниз. https://unsplash.com/join  -->
    <!-- <style>
        #photo-container {
            display: flex;
            flex-wrap: wrap;
        }

        .photo {
            flex: 1 1 calc(33.33% - 20px);
            margin: 10px;
            border: 1px solid #ccc;
            box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        .photo img {
            width: 100%;
            height: auto;
        }
    </style>

    <div id="photo-container"></div>

    <script type="module">
        const photoContainer = document.getElementById('photo-container');
let page = 1;

        async function fetchPhotos() {
            try {
                const response = await fetch(`https://api.unsplash.com/photos?page=${page}&per_page=9&client_id=u2UqPech7VLh6iW5By2X4prq_W61LHakCzUEqMXSFR8`);
                const photos = await response.json();
                return photos;
            } catch (error) {
                console.error("Ошибка при загрузке фотографий:", error);
                return [];
            }
        }
        
        async function loadMorePhotos() {
            const photos = await fetchPhotos();
            if (photos.lenght > 0) {
                photos.forEach(photo => {
                    const photoElement = document.createElement('div');
                    photoElement.classList.add('photo');
                    const img = document.createElement('img');
                    img.src = photo.urls.small;
                    img.alt = photo.alt_description;
                    photoElement.appendChild(img);
                    photoContainer.appendChild(photoElement);
                });
                page++;
            }
        }
        
        window.addEventListener("scroll", () => {
            if (window.innerHeight + window.scrollY >= document.body.offsetHeight) {
                loadMorePhotos();
            }
        }
        );
    </script> -->


    <!-- Задание 3. Создайте HTML-файл с простой веб-страницей, содержащей заголовок
"Список пользователей" и пустой список для отображения пользователей. 
    Создайте функцию fetchUserList(), которая будет выполнять GETзапрос к "https://jsonplaceholder.typicode.com/users" для получения
списка пользователей. В случае ошибки запроса, функция должна
обработать ошибку и вернуть пустой массив.
    Создайте обработчик события "load" на объекте window, чтобы
выполнить запрос к API при загрузке страницы.
    Внутри обработчика события "load", вызовите функцию
fetchUserList() для получения списка пользователей.
    Создайте элементы списка (например, элементы <li>) для каждого
пользователя в полученном списке.
Добавьте созданные элементы в список пользователей на вебстранице.
 -->

 <style>
    li {
        list-style-type: none;
        margin-bottom: 10px;
    }
 </style>

    <h2>Список пользователей</h2>
    <ul id="userList"></ul>


    <script type="module">
        const userList = document.querySelector('#userList');

        window.addEventListener('load', async () => {
            const userList = await fetchUserList();
        })

        async function fetchUserList() {
            userList.innerHTML = '';
            fetch('https://jsonplaceholder.typicode.com/users')
                .then((response) => response.json())
                .then((data) => {
                    dataList(data)
                }).catch((error) => {
                    console.log(error);
                })
        }

        function dataList(data) {
            data.forEach(user => {
                const li = document.createElement('li');
                li.classList.add('user');
                li.innerHTML = `Имя пользователя: ${user.name}; email: ${user.email}`;
                userList.appendChild(li);
            });

        }

    </script>

</body>

</html>